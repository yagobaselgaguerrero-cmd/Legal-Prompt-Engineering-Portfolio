# Proyecto: Conversor de Sentencias a C√≥digo (JSON)

## 1. El Problema
Los despachos grandes manejan miles de notificaciones judiciales. Actualmente, un administrativo debe leer cada PDF y copiar manualmente la fecha, el juzgado, la cuant√≠a y el fallo en un Excel. Es lento y propenso a errores humanos.

## 2. La Soluci√≥n (The Prompt)
Un prompt dise√±ado para actuar como un **parser (analizador sint√°ctico)**. No opina, solo extrae datos y los devuelve en formato **JSON**, que es el lenguaje que entienden las bases de datos y el software de gesti√≥n.

### üõ†Ô∏è Configuraci√≥n
* **Rol:** Analista de Datos Judiciales.
* **Restricci√≥n:** No inventes datos. Si un dato no est√° en el texto, devuelve `null`.
* **Output:** JSON Object.

### üíª El C√≥digo del Prompt (Input)

```json
/* SYSTEM ROLE */
Eres un asistente de automatizaci√≥n legal. Tu √∫nica funci√≥n es extraer datos de textos judiciales espa√±oles.

/* USER INSTRUCTION */
Analiza el texto de la sentencia proporcionada abajo.
Extrae la siguiente informaci√≥n y pres√©ntala EXCLUSIVAMENTE en formato JSON v√°lido. No a√±adas texto introductorio ni conclusiones fuera del JSON.

Claves a extraer:
- "organo_judicial": (String) El juzgado que emite la sentencia.
- "fecha_sentencia": (String format DD/MM/YYYY)
- "tipo_procedimiento": (String)
- "cuantia_condena": (Float) Solo el n√∫mero, sin el s√≠mbolo ‚Ç¨. Usa punto para decimales.
- "costas": (Boolean) true si hay condena en costas, false si no.
- "fallo_resumen": (String) Resumen en una frase de qui√©n gana.

/* INPUT TEXT */
"""
JUZGADO DE PRIMERA INSTANCIA N¬∫ 5 DE MADRID
Procedimiento Ordinario 452/2023
SENTENCIA N¬∫ 12/2024

En Madrid, a 15 de febrero de 2024.

FALLO: Que estimando √≠ntegramente la demanda interpuesta por D. Juan Garc√≠a contra Seguros S.A., debo condenar y condeno a la demandada a abonar al actor la cantidad de 15.400,50 euros, m√°s los intereses legales. Se impone a la parte demandada el pago de las costas procesales causadas en esta instancia.
"""
3. Resultado de la IA (Output)
Este es el c√≥digo que genera la IA, listo para ser copiado autom√°ticamente a una base de datos:

JSON

{
  "organo_judicial": "Juzgado de Primera Instancia N¬∫ 5 de Madrid",
  "fecha_sentencia": "15/02/2024",
  "tipo_procedimiento": "Procedimiento Ordinario 452/2023",
  "cuantia_condena": 15400.50,
  "costas": true,
  "fallo_resumen": "Estimaci√≥n √≠ntegra de la demanda a favor de D. Juan Garc√≠a contra Seguros S.A."
}
4. An√°lisis del Ingeniero
Valor: Al obtener un JSON limpio, podemos conectar este prompt a una automatizaci√≥n (usando Zapier o Python) que lea el PDF y rellene una fila de Excel autom√°ticamente.

Robustez: Se ha instruido al modelo para separar el n√∫mero de la moneda ("15400.50" en vez de "15.400,50 euros") para facilitar c√°lculos matem√°ticos posteriores.

5. Implementaci√≥n T√©cnica (API Snippet)
Para garantizar la fiabilidad en producci√≥n, este prompt no se usa en la web de ChatGPT, sino v√≠a API activando el par√°metro response_format.

A continuaci√≥n, el script de Python que asegura que la respuesta sea 100% procesable por la base de datos:

Python

from openai import OpenAI
client = OpenAI()

response = client.chat.completions.create(
  model="gpt-4-turbo",
  messages=[
    {"role": "system", "content": "Eres un extractor de datos judiciales. Responde solo en JSON."},
    {"role": "user", "content": "Analiza esta sentencia..."}
  ],
  # ESTA ES LA CLAVE: Forzamos el modo JSON para evitar errores de sintaxis
  response_format={ "type": "json_object" },
  temperature=0
)

print(response.choices[0].message.content)
Nota: Al activar json_object, evitamos que el modelo a√±ada frases conversacionales como "Aqu√≠ tienes el JSON que pediste", lo cual romper√≠a la automatizaci√≥n.


Una vez pegado, dale al bot√≥n verde **Commit changes**. ¬°Deber√≠a verse perfecto
